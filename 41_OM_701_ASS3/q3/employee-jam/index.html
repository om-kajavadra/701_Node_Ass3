<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Employee Login</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
</head>
<body class="container py-5">
  <h3>Employee Login</h3>
  <div id="msg"></div>
  <form id="loginForm">
    <div class="mb-3"><input name="empId" class="form-control" placeholder="Employee ID" /></div>
    <div class="mb-3"><input name="password" type="password" class="form-control" placeholder="Password" /></div>
    <button class="btn btn-primary">Login</button>
  </form>

  <script>
    $('#loginForm').on('submit', async function(e){
      e.preventDefault();
      const empId = this.empId.value
      const password = this.password.value
      try{
        const res = await fetch('http://localhost:4000/api/employee/login', {
          method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ empId, password })
        })
        const data = await res.json()
        if (!res.ok) { $('#msg').html('<div class="alert alert-danger">'+data.message+'</div>'); return }
        localStorage.setItem('EMP_TOKEN', data.token)
        location.href = 'profile.html'
      }catch(err){ $('#msg').html('<div class="alert alert-danger">Network error</div>') }
    })
  </script>
</body>
</html>
