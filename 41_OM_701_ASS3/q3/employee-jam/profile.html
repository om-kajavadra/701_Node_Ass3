<!doctype html>
<html>
<head>
  <meta charset="utf-8"><title>Profile</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
</head>
<body class="container py-4">
  <div class="d-flex justify-content-between"><h3>Profile</h3><button id="logout" class="btn btn-secondary">Logout</button></div>
  <div id="profileCard" class="mt-3"></div>

  <script>
    const token = localStorage.getItem('EMP_TOKEN')
    if (!token) location.href = 'index.html'

    async function load(){
      const res = await fetch('http://localhost:4000/api/employee/profile', { headers: { 'Authorization': 'Bearer '+token } })
      if (!res.ok) { localStorage.removeItem('EMP_TOKEN'); location.href = 'index.html'; return }
      const profile = await res.json()
      $('#profileCard').html(`<pre>${JSON.stringify(profile,null,2)}</pre><a href="leave.html" class="btn btn-primary">Leave Application</a>`)
    }

    $('#logout').on('click', ()=>{ localStorage.removeItem('EMP_TOKEN'); location.href='index.html' })
    load()
  </script>
</body>
</html>
